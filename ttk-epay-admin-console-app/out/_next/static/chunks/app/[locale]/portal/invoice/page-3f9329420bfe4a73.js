(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{67052:function(e,n,r){Promise.resolve().then(r.bind(r,25213))},70196:function(e,n,r){"use strict";r.d(n,{I18nProviderClient:function(){return l},IT:function(){return o},QT:function(){return t},Zt:function(){return c},eV:function(){return i}});let{useI18n:t,useScopedI18n:o,I18nProviderClient:l,useChangeLocale:c,useCurrentLocale:i}=(0,r(60802).createI18nClient)({en:()=>r.e(411).then(r.bind(r,24411)),fr:()=>r.e(1).then(r.bind(r,50001))})},25213:function(e,n,r){"use strict";r.d(n,{default:function(){return F}});var t=r(57437),o=r(99376),l=r(50337),c=r(47451),i=r(69410),a=r(8110),s=r(6833),u=r(70196),d=r(6180),x=r(2335),h=r(3981),p=r(2265),g=r(68575);let m=()=>(0,g.v9)(e=>e.invoice);var j=r(61680),k=r(46199),I=r(3489),f=r(42791),b=r(39408),T=r(76994);function y(){let e=(0,h.TL)(),n=(0,u.IT)("invoice"),r=(0,u.QT)(),[o]=(0,p.useState)([]),{invoiceList:g,isLoadingInvoiceList:y,invoiceListError:v}=m(),E=(0,T.z)(),{registration:Z}=(0,k.E)(),[C,N]=(0,p.useState)(1),[_,A]=(0,p.useState)(10);(0,p.useEffect)(()=>{e((0,j.bT)({numberPage:C,pageSize:_}))},[Z]);let D=n=>{e((0,j.m5)(n)),E.push("/portal/invoice?id=".concat(n))},O=o.length?o.map((e,n)=>({...e,render:()=>(0,t.jsx)(l.Z.Input,{active:!0},n)})):[,,,].fill({}).map((e,n)=>({title:(0,t.jsx)(l.Z.Input,{active:!0,size:"small"}),dataIndex:"col".concat(n),key:"col".concat(n),render:()=>(0,t.jsx)(l.Z.Input,{active:!0})}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Z,{gutter:16,style:{paddingTop:10,paddingInline:20},children:[(0,t.jsxs)(i.Z,{span:14,style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(d.T,{size:32,style:{color:f.r.token.blackOverlay}}),(0,t.jsx)(s.Z,{level:3,style:{fontWeight:700,color:f.r.token.blackOverlay,marginBottom:0,marginLeft:2},children:n("invoice")})]}),(0,t.jsx)(i.Z,{span:10,style:{display:"flex",justifyContent:"end"},children:(0,t.jsxs)(I.o,{onClick:()=>E.push("/portal/invoice/add"),children:[(0,t.jsx)(x.p,{size:20,style:{color:f.r.token.colorBlack}}),n("addInvoice")]})})]}),!v&&(0,t.jsx)("div",{children:(0,t.jsx)(b.n,{columns:y?O:g&&["ID","ORDER_ID","ORDER_NAME","NET_AMOUNT","CLIENT_CODE","CLIENT_NAME","IS_PAID"].map((e,r)=>"IS_PAID"===e?{title:n(e),dataIndex:e,key:r,render:e=>e?(0,t.jsx)("span",{style:{color:"#28B609"},children:n("paid")}):(0,t.jsx)("span",{children:n("unpaid")})}:{title:n(e),dataIndex:e,key:r,render:e=>null===e||""===e?(0,t.jsx)("span",{children:" - "}):(0,t.jsx)("span",{children:e})}),dataSource:y?[,].fill({key:Math.random()}):null==g?void 0:g.ITEMS,size:"middle",className:"custom-table",style:{marginTop:40,borderRadius:0,paddingInline:20,width:"100%"},rowKey:e=>e.ID||"row-".concat(Math.random()),onRow:e=>({onClick:()=>{D(e.ID)},style:{cursor:"pointer"}}),scroll:{y:"calc(100vh - 320px)"},pagination:{total:((null==g?void 0:g.TOTALPAGES)||0)*_,current:C,pageSize:_,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:(n,r)=>{N(n),A(r),e((0,j.bT)({numberPage:n,pageSize:r}))},style:{marginTop:50}}})}),!y&&v&&(0,t.jsx)(a.ZP,{status:"500",title:r("error"),subTitle:r("subTitleError")})]})}var v=r(2546),E=r(68238),Z=r(57271),C=r(61994),N=r(42264),_=r(93142),A=r(28297),D=r(59352),O=r(14301),B=r(39957),w=r(15529),L=r(35677),P=r(42659),R=r(67636),M=r(43575),S=r(17632);function z(e){let{invoiceNumber:n,clientCode:r}=e,[o,l]=(0,p.useState)(!1),[c,i]=(0,p.useState)(!1),a=(0,u.IT)("invoice"),s=(0,h.TL)(),{generatedLink:d,generateLinkError:x}=m(),g={whatsapp:"https://web.whatsapp.com/send?text=".concat(d),messenger:"https://www.facebook.com/share.php?u=".concat(d),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(d),gmail:"mailto:?subject=Regarde ceci&body=".concat(d)};(0,p.useEffect)(()=>{s((0,j.Cw)({invoiceNumber:n,clientCode:r}))},[n,r]);let k=async e=>{d?(l(e),e||i(!1)):N.ZP.error(a("generateLinkErrorMsg"))},b=e=>{navigator.clipboard.writeText(e),N.ZP.success("Copied to clipboard!")},T=()=>{i(!c)};return(0,t.jsx)(_.Z,{style:{marginInline:10},children:(0,t.jsx)(O.Z,{content:()=>(0,t.jsxs)(_.Z,{direction:"vertical",style:{width:"100%"},children:[(0,t.jsx)(A.Z,{addonAfter:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.ZP,{icon:(0,t.jsx)(B.T,{color:f.r.token.colorBlack,size:24}),type:"text",onClick:()=>b(d||"")}),(0,t.jsx)(D.ZP,{icon:(0,t.jsx)(w.G,{color:f.r.token.colorBlack,size:24}),type:"text",onClick:T})]}),size:"large",value:d,disabled:!0}),c&&(0,t.jsxs)(_.Z,{wrap:!0,style:{display:"flex",justifyContent:"end"},children:[(0,t.jsx)(D.ZP,{href:g.whatsapp,target:"_blank",rel:"noopener noreferrer",icon:(0,t.jsx)(L.s,{color:f.r.token.colorBlack,size:24})}),(0,t.jsx)(D.ZP,{href:g.messenger,target:"_blank",rel:"noopener noreferrer",icon:(0,t.jsx)(P.b,{color:f.r.token.colorBlack,size:24})}),(0,t.jsx)(D.ZP,{href:g.linkedin,target:"_blank",rel:"noopener noreferrer",icon:(0,t.jsx)(R.N,{color:f.r.token.colorBlack,size:24})}),(0,t.jsx)(D.ZP,{href:g.gmail,target:"_blank",rel:"noopener noreferrer",icon:(0,t.jsx)(M.D,{color:f.r.token.colorBlack,size:24})})]})]}),open:o,trigger:"click",onOpenChange:k,align:{offset:[-10,0]},children:(0,t.jsxs)(I.o,{children:[(0,t.jsx)(S.c,{size:20,style:{color:f.r.token.colorBlack,marginRight:8}}),a("generateLink")]})})})}function V(e){let{invoicerId:n}=e,r=(0,h.TL)(),o=(0,u.IT)("invoice"),x=(0,u.QT)(),[g]=E.Z.useForm(),{invoice:b,invoiceError:T,isLoadingInvoice:y}=m(),{registration:N}=(0,k.E)(),[_,A]=Z.ZP.useNotification();(0,p.useEffect)(()=>{r((0,j.m5)(n))},[N,n]);let D=async e=>{try{await r((0,j.aL)({ID:null==b?void 0:b.ID,...e})).unwrap(),_.success({message:o("success"),description:o("updateInvoiceSuccessMsg")})}catch(e){_.error({message:o("error"),description:"".concat(e)})}};return(0,t.jsxs)(t.Fragment,{children:[A,(0,t.jsxs)(c.Z,{gutter:16,style:{paddingTop:10,paddingInline:20},children:[(0,t.jsxs)(i.Z,{span:24,style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(d.T,{size:32,style:{color:f.r.token.blackOverlay}}),(0,t.jsx)(s.Z,{level:3,style:{fontWeight:700,color:f.r.token.blackOverlay,marginBottom:0,marginLeft:2},children:o("invoice")})]}),(0,t.jsx)(i.Z,{span:24,style:{display:"flex",justifyContent:"end",marginTop:10},children:(0,t.jsx)(z,{invoiceNumber:null==b?void 0:b.INVOICE_NUMBER,clientCode:null==b?void 0:b.CLIENT_CODE})})]}),(0,t.jsx)(c.Z,{}),y&&!b&&(0,t.jsxs)(c.Z,{gutter:[10,10],style:{margin:20},children:[(0,t.jsx)(i.Z,{span:2,children:(0,t.jsx)(l.Z,{active:!0,paragraph:{rows:.5}})}),(0,t.jsx)(i.Z,{span:22,children:(0,t.jsx)(l.Z.Input,{active:!0})})]}),!y&&b&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(E.Z,{form:g,name:"profile-update",onFinish:D,labelCol:{flex:"110px"},labelAlign:"left",labelWrap:!0,wrapperCol:{flex:0},colon:!1,style:{padding:20},initialValues:{ORDER_ID:b.ORDER_ID,ORDER_NAME:b.ORDER_NAME,NET_AMOUNT:b.NET_AMOUNT,INVOICE_TVA:b.INVOICE_TVA,AMOUNT_TVA:b.AMOUNT_TVA,AMOUNT_TTC:b.AMOUNT_TTC,CLIENT_CODE:b.CLIENT_CODE,CLIENT_NAME:b.CLIENT_NAME,CLIENT_NRC:b.CLIENT_NRC,CLIENT_ADDRESS:b.CLIENT_ADDRESS,CLIENT_MAIL:b.CLIENT_MAIL,CLIENT_IDF:b.CLIENT_IDF,IS_PAID:b.IS_PAID,PRODUCT_NAME:b.PRODUCT_NAME},children:[(0,t.jsxs)(c.Z,{gutter:[16,16],children:[(0,t.jsx)(i.Z,{md:12,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("orderId"),name:"ORDER_ID",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})}),(0,t.jsx)(i.Z,{md:12,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("ORDER_NAME"),name:"ORDER_NAME",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})})]}),(0,t.jsx)(E.Z.Item,{label:o("netAmount"),name:"NET_AMOUNT",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})}),(0,t.jsxs)(c.Z,{gutter:[16,16],children:[(0,t.jsx)(i.Z,{md:8,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("invoiceTva"),name:"INVOICE_TVA",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})}),(0,t.jsx)(i.Z,{md:8,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("amountTva"),name:"AMOUNT_TVA",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})}),(0,t.jsx)(i.Z,{md:8,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("amountTtc"),name:"AMOUNT_TTC",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})})]}),(0,t.jsx)(E.Z.Item,{label:o("clientCode"),name:"CLIENT_CODE",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})}),(0,t.jsxs)(c.Z,{gutter:[16,16],children:[(0,t.jsx)(i.Z,{md:16,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("clientName"),name:"CLIENT_NAME",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})}),(0,t.jsx)(i.Z,{md:8,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("clientNrc"),name:"CLIENT_NRC",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})})]}),(0,t.jsx)(E.Z.Item,{label:o("clientAdress"),name:"CLIENT_ADDRESS",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})}),(0,t.jsx)(E.Z.Item,{label:o("clientMail"),name:"CLIENT_MAIL",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})}),(0,t.jsxs)(c.Z,{gutter:[16,16],children:[(0,t.jsx)(i.Z,{md:20,xs:24,children:(0,t.jsx)(E.Z.Item,{label:o("ClientIdf"),name:"CLIENT_IDF",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})})}),(0,t.jsx)(i.Z,{md:4,xs:24,children:(0,t.jsx)(E.Z.Item,{name:"IS_PAID",valuePropName:"checked",children:(0,t.jsx)(C.Z,{children:o("isPaid")})})})]}),(0,t.jsx)(E.Z.Item,{label:o("productName"),name:"PRODUCT_NAME",children:(0,t.jsx)(v.x,{style:{color:f.r.token.colorBlack}})}),(0,t.jsx)(E.Z.Item,{wrapperCol:{span:24},style:{textAlign:"end",marginTop:20},children:(0,t.jsx)(I.s,{htmlType:"submit",children:o("updateInvoice")})})]})}),!y&&T&&(0,t.jsx)(a.ZP,{status:"500",title:x("error"),subTitle:x("subTitleError")})]})}function F(){let e=(0,o.useSearchParams)().get("id");return e?(0,t.jsx)(V,{invoicerId:e}):(0,t.jsx)(y,{})}},61680:function(e,n,r){"use strict";r.d(n,{Cw:function(){return u},aL:function(){return a},bT:function(){return c},m5:function(){return i},p8:function(){return l},uH:function(){return s}});var t=r(1455);let{TtkEpay:o}=r(26216),l=e=>{var n,r;let t=e.getState();return new o(null===(n=t.registration.registration)||void 0===n?void 0:n.url,null===(r=t.registration.registration)||void 0===r?void 0:r.secretKey)},c=(0,t.hg)("invoice/getInvoices",async(e,n)=>{let r=l(n);try{return await r.getInvoices(e.numberPage,e.pageSize)}catch(e){return console.error("Error fetching invoices:",e.message),n.rejectWithValue(e.message)}}),i=(0,t.hg)("invoice/getInvoiceById",async(e,n)=>{let r=l(n);try{return await r.getInvoiceById(e)}catch(e){return console.error("Error finding invoice: ".concat(e.message)),n.rejectWithValue(e.message)}}),a=(0,t.hg)("invoice/updateInvoice",async(e,n)=>{let r=l(n);try{return await r.updateInvoice(e.ID,e)}catch(e){return console.error("Update failed: ".concat(e.message)),n.rejectWithValue(e.message)}}),s=(0,t.hg)("invoice/postInvoice",async(e,n)=>{let r=l(n);try{return await r.createInvoice(e)}catch(e){return n.rejectWithValue(e.message)}}),u=(0,t.hg)("invoice/generateLink",async(e,n)=>{let r=l(n);try{return await r.generateLink(e.invoiceNumber,e.clientCode)}catch(e){return n.rejectWithValue(e.message)}})},46199:function(e,n,r){"use strict";r.d(n,{E:function(){return o}});var t=r(68575);let o=()=>(0,t.v9)(e=>e.registration)},3981:function(e,n,r){"use strict";r.d(n,{TL:function(){return t}});let t=r(68575).I0},76994:function(e,n,r){"use strict";r.d(n,{z:function(){return o}});var t=r(99376);function o(){let e=(0,t.useRouter)(),{locale:n}=(0,t.useParams)();return{push:r=>e.push("/".concat(n).concat(r)),replace:r=>e.replace("/".concat(n).concat(r)),back:()=>e.back()}}},3489:function(e,n,r){"use strict";r.d(n,{o:function(){return u},s:function(){return s}});var t=r(45008),o=r(59352),l=r(99379),c=r(42791);function i(){let e=(0,t._)([" &&\n {  \n    color: ",";\n    background-color: ",";\n    border: none;\n    border-raduis:10px;\n    padding: 10px 30px;\n    transition: background-color 0.3s ease;\n\n     &:hover {\n      background-color: "," !important;\n      color: "," !important;\n      border: none !important;\n      box-shadow: none !important;\n    }\n}\n"]);return i=function(){return e},e}function a(){let e=(0,t._)([" &&\n {  \n    color: ",";\n    background-color: ",";\n    border: none;\n    border-raduis:8px;\n    padding-inline: 20px;\n    font-size: 15px;\n    height: 40px;\n    transition: background-color 0.3s ease;\n                           \n\n     &:hover {\n      background-color: "," !important;\n      color: "," !important;\n      border: none !important;\n      box-shadow: none !important;\n    }\n}\n"]);return a=function(){return e},e}let s=(0,l.ZP)(o.ZP)(i(),c.r.token.colorBlack,c.r.token.blueOverlay,c.r.token.blueOverlay,c.r.token.colorBlack),u=(0,l.ZP)(o.ZP)(a(),c.r.token.colorBlack,c.r.token.skyBlue,c.r.token.skyBlue,c.r.token.colorBlack)},2546:function(e,n,r){"use strict";r.d(n,{x:function(){return c}});var t=r(45008),o=r(28297);function l(){let e=(0,t._)([" &&\n {  \n    border: 1px solid rgba(0, 0, 0, 0.21);\n    border-radius: 8px;\n    background-color: #F2F2F2;\n}\n"]);return l=function(){return e},e}let c=(0,r(99379).ZP)(o.Z)(l())},39408:function(e,n,r){"use strict";r.d(n,{n:function(){return c}});var t=r(45008),o=r(19616);function l(){let e=(0,t._)([" && {  \n    .ant-table-container {\n        height: calc(100vh - 300px);\n    }\n    \n}\n"]);return l=function(){return e},e}let c=(0,r(99379).ZP)(o.Z)(l())},42791:function(e,n,r){"use strict";r.d(n,{r:function(){return t}});let t={token:{colorWhite:"white",colorBlack:"black",blueOverlay:"rgba(22, 119, 255, 0.4)",coolBlue:"#5394CC",whisperBlue:"rgba(218, 236, 247, 0.2)",skyBlue:"rgba(218, 236, 247, 0.57)",neutralGray:"#7D7D7D",ghostBlack:"rgba(0, 0, 0, 0.1)",blackOverlay:"rgba(0, 0, 0, 0.7)",smokyBlack:"rgba(0,0,0,.45))",borderRadius:8,fontSize:14,fontFamily:"var(--font-dm-sans)",headingFontSize:{h1:35,h2:30,h3:28,h4:24,h5:20,h6:16}},components:{Typography:{fontFamily:"Inter, sans-serif",titleMarginBottom:8},algorithm:"dark",Button:{borderColorDisabled:"rgb(76,150,215)",defaultActiveBorderColor:"rgb(76,150,215)",colorText:"rgba(0,0,0,0)"}}}}},function(e){e.O(0,[569,677,776,216,701,180,360,81,971,117,744],function(){return e(e.s=67052)}),_N_E=e.O()}]);