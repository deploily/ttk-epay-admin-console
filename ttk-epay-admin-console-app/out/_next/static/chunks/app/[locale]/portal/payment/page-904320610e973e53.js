(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{75626:function(e,t,n){Promise.resolve().then(n.bind(n,97431))},70196:function(e,t,n){"use strict";n.d(t,{I18nProviderClient:function(){return a},IT:function(){return o},QT:function(){return r},Zt:function(){return c},eV:function(){return l}});let{useI18n:r,useScopedI18n:o,I18nProviderClient:a,useChangeLocale:c,useCurrentLocale:l}=(0,n(60802).createI18nClient)({en:()=>n.e(411).then(n.bind(n,24411)),fr:()=>n.e(1).then(n.bind(n,50001))})},97431:function(e,t,n){"use strict";n.d(t,{default:function(){return B}});var r=n(57437),o=n(99376),a=n(38229),c=n(57271),l=n(50337),s=n(47451),i=n(69410),u=n(8110),d=n(6833),p=n(70196),m=n(45214),g=n(6180),y=n(55213),h=n(3981),x=n(2265),f=n(68575);let k=()=>(0,f.v9)(e=>e.payment);var b=n(65584),j=n(71096),I=n.n(j),v=n(46199),O=n(3489),D=n(42791),Z=n(39408),C=n(76994);function E(){let e;let t=(0,h.TL)(),n=(0,p.IT)("payment"),o=(0,p.QT)(),[f]=(0,x.useState)([]),{paymentList:j,isLoadingPaymentList:E,paymentErrorList:T}=k(),S=(0,C.z)(),{registration:R}=(0,v.E)(),[B,_]=(0,x.useState)(1),[w,P]=(0,x.useState)(10),{RangePicker:N}=a.default,[M,A]=(0,x.useState)(I()().subtract(30,"day")),[z,L]=(0,x.useState)(I()()),[V,W]=c.ZP.useNotification();(0,x.useEffect)(()=>{t((0,b.O1)({numberPage:B,pageSize:w,startDate:M.toISOString(),endDate:z.toISOString()}))},[R,B,w,M,z]);let Y=async e=>{try{await t((0,b.cN)(e)).unwrap(),V.success({message:"Succ\xe8s",description:n("savePdfReceiptSuccessMsg")})}catch(e){V.error({message:"Erreur",description:"".concat(e)})}},U=f.length?f.map((e,t)=>({...e,render:()=>(0,r.jsx)(l.Z.Input,{active:!0},t)})):[,,,].fill({}).map((e,t)=>({title:(0,r.jsx)(l.Z.Input,{active:!0,size:"small"}),dataIndex:"col".concat(t),key:"col".concat(t),render:()=>(0,r.jsx)(l.Z.Input,{active:!0})}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{gutter:16,style:{paddingTop:10,paddingInline:20},children:[(0,r.jsxs)(i.Z,{span:24,style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(g.T,{size:32,style:{color:D.r.token.blackOverlay}}),(0,r.jsx)(d.Z,{level:3,style:{fontWeight:700,color:D.r.token.blackOverlay,marginBottom:0,marginLeft:2},children:n("payment")})]}),(0,r.jsx)(i.Z,{span:10}),(0,r.jsxs)(i.Z,{span:24,style:{display:"flex",justifyContent:"end",gap:4},children:[(0,r.jsx)(N,{value:[M,z],format:"DD-MM-YYYY",onChange:e=>{e&&2===e.length&&(A(e[0]),L(e[1]))}}),(0,r.jsxs)(O.o,{disabled:!0,style:{opacity:.6},children:[(0,r.jsx)(y.V,{size:20,style:{color:D.r.token.colorBlack}}),n("downloadList")]})]})]}),W,!T&&(0,r.jsx)("div",{children:(0,r.jsx)(Z.n,{columns:E?U:j&&((e=["ID","ACTION_CODE","AMOUNT","ORDER_NUMBER","SATIM_ORDER_ID","DATE"].map((e,t)=>"DATE"===e?{title:n(e),dataIndex:e,key:t,render:e=>I()(e).format("DD-MM-YYYY HH:mm")}:{title:n(e),dataIndex:e,key:t})).push({title:"",dataIndex:"",key:6,render:e=>(0,r.jsx)("div",{style:{textAlign:"end",marginRight:15},onClick:t=>{t.stopPropagation(),Y(e.SATIM_ORDER_ID)},children:(0,r.jsx)(m.U,{size:24,color:D.r.token.colorBlack,style:{cursor:"pointer"}})})}),e),dataSource:E?[,].fill({key:Math.random()}):null==j?void 0:j.ITEMS,size:"middle",className:"custom-table",style:{marginTop:40,borderRadius:0,paddingInline:20},scroll:{y:"calc(100vh - 350px)"},rowKey:e=>e.ID||"row-".concat(Math.random()),onRow:e=>({onClick:()=>S.push("/portal/payment?id=".concat(e.ID)),style:{cursor:"pointer"}}),pagination:{total:((null==j?void 0:j.TOTALPAGES)||0)*w,current:B,pageSize:w,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:(e,n)=>{_(e),P(n),t((0,b.O1)({numberPage:e,pageSize:n,startDate:M.toISOString(),endDate:z.toISOString()}))},style:{marginTop:50}}})}),!E&&T&&(0,r.jsx)(u.ZP,{status:"500",title:o("error"),subTitle:o("subTitleError")})]})}var T=n(2546),S=n(68238);function R(e){let{paymentId:t}=e,n=(0,h.TL)(),o=(0,p.IT)("payment"),a=(0,p.QT)(),[m]=S.Z.useForm(),{payment:f,paymentError:j,isLoadingPayment:Z}=k(),{registration:C}=(0,v.E)(),[E,R]=c.ZP.useNotification();(0,x.useEffect)(()=>{n((0,b.$S)(t))},[C]);let B=async e=>{try{await n((0,b.cN)(e)).unwrap(),E.success({message:o("success"),description:o("savePdfReceiptSuccessMsg")})}catch(e){E.error({message:o("error"),description:"".concat(e)})}};return(0,r.jsxs)(r.Fragment,{children:[R,(0,r.jsxs)(s.Z,{gutter:16,style:{paddingTop:10,paddingInline:20},children:[(0,r.jsxs)(i.Z,{span:24,style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(g.T,{size:32,style:{color:D.r.token.blackOverlay}}),(0,r.jsx)(d.Z,{level:3,style:{fontWeight:700,color:D.r.token.blackOverlay,marginBottom:0,marginLeft:2},children:o("payment")})]}),(0,r.jsx)(i.Z,{span:24,style:{display:"flex",justifyContent:"end",marginTop:10},children:!Z&&f&&(0,r.jsxs)(O.o,{disabled:0!=f.ACTION_CODE,onClick:e=>{B(f.SATIM_ORDER_ID)},style:{opacity:"".concat(0!=f.ACTION_CODE?.6:1)},children:[(0,r.jsx)(y.V,{size:20,style:{color:D.r.token.colorBlack}}),o("downloadReceipt")]})})]}),(0,r.jsx)(s.Z,{}),Z&&!f&&(0,r.jsxs)(s.Z,{gutter:[10,10],style:{margin:20},children:[(0,r.jsx)(i.Z,{span:2,children:(0,r.jsx)(l.Z,{active:!0,paragraph:{rows:.5}})}),(0,r.jsx)(i.Z,{span:22,children:(0,r.jsx)(l.Z.Input,{active:!0})})]}),!Z&&f&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(S.Z,{form:m,name:"profile-update",labelCol:{flex:"110px"},labelAlign:"left",labelWrap:!0,wrapperCol:{flex:0},colon:!1,style:{padding:20},initialValues:{date:I()(f.DATE).format("DD-MM-YYYY HH:mm"),actionCodeDescreption:f.ACTION_CODE_DESCRIPTION,actionCode:f.ACTION_CODE,amount:f.AMOUNT,authCode:f.AUTH_CODE,currency:f.ERROR_CODE,errorMessage:f.ERROR_MESSAGE,cardHoldeName:f.CARD_HOLDER_NAME,expiration:f.EXPIRATION,orderNumber:f.ORDER_NUMBER,satimOrderId:f.SATIM_ORDER_ID,responseCodeDescreption:f.RESPONSE_CODE_DESCRIPTION},children:[(0,r.jsx)(S.Z.Item,{label:o("date"),name:"date",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsx)(S.Z.Item,{label:o("actionCodeDescreption"),name:"actionCodeDescreption",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsx)(S.Z.Item,{label:o("actionCode"),name:"actionCode",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsxs)(s.Z,{gutter:[16,16],children:[(0,r.jsx)(i.Z,{md:8,xs:24,children:(0,r.jsx)(S.Z.Item,{label:o("amount"),name:"amount",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})}),(0,r.jsx)(i.Z,{md:8,xs:24,children:(0,r.jsx)(S.Z.Item,{label:o("authCode"),name:"authCode",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})}),(0,r.jsx)(i.Z,{md:8,xs:24,children:(0,r.jsx)(S.Z.Item,{label:o("currency"),name:"currency",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})})]}),(0,r.jsx)(S.Z.Item,{label:o("errorMessage"),name:"errorMessage",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsx)(S.Z.Item,{label:o("cardHoldeName"),name:"cardHoldeName",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsxs)(s.Z,{gutter:[16,16],children:[(0,r.jsx)(i.Z,{md:12,xs:24,children:(0,r.jsx)(S.Z.Item,{label:o("expiration"),name:"expiration",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})}),(0,r.jsx)(i.Z,{md:12,xs:24,children:(0,r.jsx)(S.Z.Item,{label:o("orderNumber"),name:"orderNumber",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})})]}),(0,r.jsx)(S.Z.Item,{label:o("satimOrderId"),name:"satimOrderId",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})}),(0,r.jsx)(S.Z.Item,{label:o("responseCodeDescreption"),name:"responseCodeDescreption",children:(0,r.jsx)(T.x,{style:{color:D.r.token.colorBlack},readOnly:!0})})]})}),!Z&&j&&(0,r.jsx)(u.ZP,{status:"500",title:a("error"),subTitle:a("subTitleError")})]})}function B(){let e=(0,o.useSearchParams)().get("id");return e?(0,r.jsx)(R,{paymentId:e}):(0,r.jsx)(E,{})}},61680:function(e,t,n){"use strict";n.d(t,{Cw:function(){return u},aL:function(){return s},bT:function(){return c},m5:function(){return l},p8:function(){return a},uH:function(){return i}});var r=n(1455);let{TtkEpay:o}=n(26216),a=e=>{var t,n;let r=e.getState();return new o(null===(t=r.registration.registration)||void 0===t?void 0:t.url,null===(n=r.registration.registration)||void 0===n?void 0:n.secretKey)},c=(0,r.hg)("invoice/getInvoices",async(e,t)=>{let n=a(t);try{return await n.getInvoices(e.numberPage,e.pageSize)}catch(e){return console.error("Error fetching invoices:",e.message),t.rejectWithValue(e.message)}}),l=(0,r.hg)("invoice/getInvoiceById",async(e,t)=>{let n=a(t);try{return await n.getInvoiceById(e)}catch(e){return console.error("Error finding invoice: ".concat(e.message)),t.rejectWithValue(e.message)}}),s=(0,r.hg)("invoice/updateInvoice",async(e,t)=>{let n=a(t);try{return await n.updateInvoice(e.ID,e)}catch(e){return console.error("Update failed: ".concat(e.message)),t.rejectWithValue(e.message)}}),i=(0,r.hg)("invoice/postInvoice",async(e,t)=>{let n=a(t);try{return await n.createInvoice(e)}catch(e){return t.rejectWithValue(e.message)}}),u=(0,r.hg)("invoice/generateLink",async(e,t)=>{let n=a(t);try{return await n.generateLink(e.invoiceNumber,e.clientCode)}catch(e){return t.rejectWithValue(e.message)}})},65584:function(e,t,n){"use strict";n.d(t,{$S:function(){return c},O1:function(){return a},cN:function(){return l}});var r=n(1455),o=n(61680);let a=(0,r.hg)("payment/fetchPayment",async(e,t)=>{let n=(0,o.p8)(t);try{return await n.getPayments({pageNumber:e.numberPage,pageSize:e.pageSize,from_date:e.startDate,to_date:e.endDate})}catch(e){return console.error("Error fetching payments:",e),t.rejectWithValue(e.message)}}),c=(0,r.hg)("payment/getPaymentById",async(e,t)=>{let n=(0,o.p8)(t);try{return await n.getPaymentById(e)}catch(e){return console.error("Error finding payment: ".concat(e.message)),t.rejectWithValue(e.message)}}),l=(0,r.hg)("payment/savePdfReceipt",async(e,t)=>{let n=(0,o.p8)(t);try{let t=await n.getPdfRecipt(e),r=new Blob([t],{type:"application/pdf"}),o=window.URL.createObjectURL(r),a=document.createElement("a");return a.href=o,a.download="receipt_".concat(e,".pdf"),a.click(),window.URL.revokeObjectURL(o),"Downloaded successfully"}catch(e){return t.rejectWithValue(e.message)}})},46199:function(e,t,n){"use strict";n.d(t,{E:function(){return o}});var r=n(68575);let o=()=>(0,r.v9)(e=>e.registration)},3981:function(e,t,n){"use strict";n.d(t,{TL:function(){return r}});let r=n(68575).I0},76994:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(99376);function o(){let e=(0,r.useRouter)(),{locale:t}=(0,r.useParams)();return{push:n=>e.push("/".concat(t).concat(n)),replace:n=>e.replace("/".concat(t).concat(n)),back:()=>e.back()}}},3489:function(e,t,n){"use strict";n.d(t,{o:function(){return u},s:function(){return i}});var r=n(45008),o=n(59352),a=n(99379),c=n(42791);function l(){let e=(0,r._)([" &&\n {  \n    color: ",";\n    background-color: ",";\n    border: none;\n    border-raduis:10px;\n    padding: 10px 30px;\n    transition: background-color 0.3s ease;\n\n     &:hover {\n      background-color: "," !important;\n      color: "," !important;\n      border: none !important;\n      box-shadow: none !important;\n    }\n}\n"]);return l=function(){return e},e}function s(){let e=(0,r._)([" &&\n {  \n    color: ",";\n    background-color: ",";\n    border: none;\n    border-raduis:8px;\n    padding-inline: 20px;\n    font-size: 15px;\n    height: 40px;\n    transition: background-color 0.3s ease;\n                           \n\n     &:hover {\n      background-color: "," !important;\n      color: "," !important;\n      border: none !important;\n      box-shadow: none !important;\n    }\n}\n"]);return s=function(){return e},e}let i=(0,a.ZP)(o.ZP)(l(),c.r.token.colorBlack,c.r.token.blueOverlay,c.r.token.blueOverlay,c.r.token.colorBlack),u=(0,a.ZP)(o.ZP)(s(),c.r.token.colorBlack,c.r.token.skyBlue,c.r.token.skyBlue,c.r.token.colorBlack)},2546:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(45008),o=n(28297);function a(){let e=(0,r._)([" &&\n {  \n    border: 1px solid rgba(0, 0, 0, 0.21);\n    border-radius: 8px;\n    background-color: #F2F2F2;\n}\n"]);return a=function(){return e},e}let c=(0,n(99379).ZP)(o.Z)(a())},39408:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r=n(45008),o=n(19616);function a(){let e=(0,r._)([" && {  \n    .ant-table-container {\n        height: calc(100vh - 300px);\n    }\n    \n}\n"]);return a=function(){return e},e}let c=(0,n(99379).ZP)(o.Z)(a())},42791:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});let r={token:{colorWhite:"white",colorBlack:"black",blueOverlay:"rgba(22, 119, 255, 0.4)",coolBlue:"#5394CC",whisperBlue:"rgba(218, 236, 247, 0.2)",skyBlue:"rgba(218, 236, 247, 0.57)",neutralGray:"#7D7D7D",ghostBlack:"rgba(0, 0, 0, 0.1)",blackOverlay:"rgba(0, 0, 0, 0.7)",smokyBlack:"rgba(0,0,0,.45))",borderRadius:8,fontSize:14,fontFamily:"var(--font-dm-sans)",headingFontSize:{h1:35,h2:30,h3:28,h4:24,h5:20,h6:16}},components:{Typography:{fontFamily:"Inter, sans-serif",titleMarginBottom:8},algorithm:"dark",Button:{borderColorDisabled:"rgb(76,150,215)",defaultActiveBorderColor:"rgb(76,150,215)",colorText:"rgba(0,0,0,0)"}}}}},function(e){e.O(0,[569,677,776,216,701,180,360,444,971,117,744],function(){return e(e.s=75626)}),_N_E=e.O()}]);